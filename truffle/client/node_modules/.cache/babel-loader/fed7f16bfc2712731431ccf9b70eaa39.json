{"ast":null,"code":"import _regeneratorRuntime from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/airoslive/Codes/EthCode/BountyCollector/client/src/components/Proposal.jsx\";\nimport React, { Component } from \"react\";\n\nvar Proposal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Proposal, _Component);\n\n  function Proposal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Proposal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Proposal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      identifier: \"\",\n      description: \"\",\n      poster: \"\",\n      review: \"\",\n      status: \"\",\n      disputeIdentifier: \"\"\n    };\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var proposalID, bountyID, proposalJson, identifier, description, poster, review, status, disputeIdentifier;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              proposalID = _this.props.proposalID;\n              bountyID = _this.props.bountyID;\n              _context.next = 4;\n              return _this.props.appState.contract.fetchProposal(bountyID, proposalID);\n\n            case 4:\n              proposalJson = _context.sent;\n              identifier = proposalID;\n              description = proposalJson[\"description\"];\n              poster = proposalJson[\"poster\"];\n              review = proposalJson[\"review\"];\n              if (review === \"\") review = \"None\";\n              status = _this.statusCodeToString(parseInt(proposalJson[\"status\"]));\n              disputeIdentifier = proposalJson[\"disputeIdentifier\"].toNumber();\n\n              _this.setState({\n                identifier: identifier,\n                description: description,\n                poster: poster,\n                review: review,\n                status: status,\n                disputeIdentifier: disputeIdentifier\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n    _this.componentDidUpdate =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var proposalID, bountyID, proposalJson, identifier, description, poster, review, status, disputeIdentifier;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!_this.props.proposalUpdate) {\n                _context2.next = 14;\n                break;\n              }\n\n              proposalID = _this.props.proposalID;\n              bountyID = _this.props.bountyID;\n              _context2.next = 5;\n              return _this.props.appState.contract.fetchProposal(bountyID, proposalID);\n\n            case 5:\n              proposalJson = _context2.sent;\n              identifier = proposalID;\n              description = proposalJson[\"description\"];\n              poster = proposalJson[\"poster\"];\n              review = proposalJson[\"review\"];\n              if (review === \"\") review = \"None\";\n              status = _this.statusCodeToString(parseInt(proposalJson[\"status\"]));\n              disputeIdentifier = proposalJson[\"disputeIdentifier\"].toNumber();\n\n              if (_this.state.status !== status || _this.state.disputeIdentifier !== disputeIdentifier) {\n                _this.setState({\n                  identifier: identifier,\n                  description: description,\n                  poster: poster,\n                  review: review,\n                  status: status,\n                  disputeIdentifier: disputeIdentifier\n                });\n              }\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n    return _this;\n  }\n\n  _createClass(Proposal, [{\n    key: \"statusCodeToString\",\n    value: function statusCodeToString(code) {\n      if (code === 0) return \"Reviewable\";else if (code === 1) return \"Declined\";else if (code === 2) return \"Accepted\";\n    }\n  }, {\n    key: \"disputeButtonConditionalRendering\",\n    value: function disputeButtonConditionalRendering() {\n      var _this2 = this;\n\n      if (this.props.latestProposal === this.state.identifier + 1 && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase() && this.state.status === \"Declined\" && this.props.open === true && this.state.disputeIdentifier === 0) {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"disputeProposalButton\",\n          id: \"disputeProposalButton\",\n          onClick: function onClick(bountyID, proposalID) {\n            _this2.props.onAddDispute(_this2.props.bountyID, _this2.props.proposalID);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, \"Dispute\"));\n      }\n    }\n  }, {\n    key: \"reviewButtonConditionalRendering\",\n    value: function reviewButtonConditionalRendering() {\n      var _this3 = this;\n\n      if (this.props.latestProposal === this.state.identifier && this.props.appState.accounts[0].toUpperCase() === this.props.bountyPoster.toUpperCase() && this.state.status === \"Reviewable\" && this.props.open === true) {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"reviewProposalButton\",\n          id: \"reviewProposalButton\",\n          onClick: function onClick(bountyID, proposalID) {\n            _this3.props.onReviewProposal(_this3.props.bountyID, _this3.props.proposalID);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, \"Review\"));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.state.identifier), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, this.state.description), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.state.review), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, this.state.status), this.reviewButtonConditionalRendering(), this.disputeButtonConditionalRendering());\n    }\n  }]);\n\n  return Proposal;\n}(Component);\n\nexport default Proposal;","map":{"version":3,"sources":["/home/airoslive/Codes/EthCode/BountyCollector/client/src/components/Proposal.jsx"],"names":["React","Component","Proposal","state","identifier","description","poster","review","status","disputeIdentifier","componentDidMount","proposalID","props","bountyID","appState","contract","fetchProposal","proposalJson","statusCodeToString","parseInt","toNumber","setState","componentDidUpdate","proposalUpdate","code","latestProposal","accounts","toUpperCase","open","onAddDispute","bountyPoster","onReviewProposal","reviewButtonConditionalRendering","disputeButtonConditionalRendering"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nclass Proposal extends Component {\n  state = {\n    identifier: \"\",\n    description: \"\",\n    poster: \"\",\n    review: \"\",\n    status: \"\",\n    disputeIdentifier: \"\",\n  }\n\n  componentDidMount = async () => {\n    const proposalID = this.props.proposalID;\n    const bountyID = this.props.bountyID;\n    const proposalJson = await this.props.appState.contract.fetchProposal(bountyID, proposalID);\n    const identifier = proposalID;\n    const description = proposalJson[\"description\"];\n    const poster = proposalJson[\"poster\"];\n    var review = proposalJson[\"review\"];\n    if (review === \"\") review = \"None\";\n    const status = this.statusCodeToString(parseInt(proposalJson[\"status\"]));\n    const disputeIdentifier = proposalJson[\"disputeIdentifier\"].toNumber();\n    this.setState({ identifier, description, poster, review, status, disputeIdentifier});\n  }\n\n  componentDidUpdate = async () => {\n    if (this.props.proposalUpdate) {\n      const proposalID = this.props.proposalID;\n      const bountyID = this.props.bountyID;\n      const proposalJson = await this.props.appState.contract.fetchProposal(bountyID, proposalID);\n      const identifier = proposalID;\n      const description = proposalJson[\"description\"];\n      const poster = proposalJson[\"poster\"];\n      var review = proposalJson[\"review\"];\n      if (review === \"\") review = \"None\";\n      const status = this.statusCodeToString(parseInt(proposalJson[\"status\"]));\n      const disputeIdentifier = proposalJson[\"disputeIdentifier\"].toNumber()\n      if (this.state.status !== status || this.state.disputeIdentifier !== disputeIdentifier) {\n        this.setState({ identifier, description, poster, review, status, disputeIdentifier});\n      }\n    }\n  }\n\n  statusCodeToString(code) {\n    if (code === 0) return \"Reviewable\";\n    else if (code === 1) return \"Declined\";\n    else if (code === 2) return \"Accepted\"\n  }\n\n  disputeButtonConditionalRendering() {\n    if (this.props.latestProposal === this.state.identifier + 1 && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase()\n      && this.state.status === \"Declined\" && this.props.open === true && this.state.disputeIdentifier === 0) {\n      return <td><button className=\"disputeProposalButton\" id=\"disputeProposalButton\" onClick={(bountyID, proposalID) => {this.props.onAddDispute(this.props.bountyID, this.props.proposalID)}}>Dispute</button></td>\n    }\n  }\n\n  reviewButtonConditionalRendering() {\n    if (this.props.latestProposal === this.state.identifier && this.props.appState.accounts[0].toUpperCase() === this.props.bountyPoster.toUpperCase()\n      && this.state.status === \"Reviewable\" && this.props.open === true) {\n      return <td><button className=\"reviewProposalButton\" id=\"reviewProposalButton\" onClick={(bountyID, proposalID) => {this.props.onReviewProposal(this.props.bountyID, this.props.proposalID)}}>Review</button></td>\n    }\n  }\n\n  render() {\n    return(\n      <React.Fragment>\n        <td>{this.state.identifier}</td>\n        <td>{this.state.description}</td>\n        <td>{this.state.review}</td>\n        <td>{this.state.status}</td>\n        {this.reviewButtonConditionalRendering()}\n        {this.disputeButtonConditionalRendering()}\n      </React.Fragment>\n      )\n  }\n}\nexport default Proposal;\n"]},"metadata":{},"sourceType":"module"}