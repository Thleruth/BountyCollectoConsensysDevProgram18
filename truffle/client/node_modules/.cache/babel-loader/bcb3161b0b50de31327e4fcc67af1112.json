{"ast":null,"code":"import _regeneratorRuntime from \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/src/components/Bounty.jsx\";\nimport React, { Component } from \"react\";\nimport \"./css/Bounty.css\";\n\nvar Bounty =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Bounty, _Component);\n\n  function Bounty() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Bounty);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Bounty)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      identifier: \"\",\n      name: \"\",\n      description: \"\",\n      reward: \"\",\n      poster: \"\",\n      status: \"\",\n      proposalsCounter: \"\",\n      rejectedProposalsCounter: \"\"\n    };\n    _this.componentDidUpdate =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var id, bountyJson, identifier, name, description, reward, poster, status, proposalsCounter, rejectedProposalsCounter;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_this.props.bountyUpdate) {\n                _context.next = 14;\n                break;\n              }\n\n              id = _this.props.bountyID;\n              _context.next = 4;\n              return _this.props.appState.contract.fetchBounty(id);\n\n            case 4:\n              bountyJson = _context.sent;\n              identifier = id;\n              name = bountyJson[\"name\"];\n              description = bountyJson[\"description\"];\n              reward = parseInt(bountyJson[\"reward\"]) / 1000000000000000000;\n              poster = bountyJson[\"poster\"];\n              status = _this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n              proposalsCounter = parseInt(bountyJson[\"proposalsCounter\"]);\n              rejectedProposalsCounter = parseInt(bountyJson[\"rejectedProposalsCounter\"]);\n\n              if (_this.state.proposalsCounter !== proposalsCounter || _this.state.rejectedProposalsCounter !== rejectedProposalsCounter || _this.state.status !== status) {\n                _this.setState({\n                  identifier: identifier,\n                  name: name,\n                  description: description,\n                  reward: reward,\n                  poster: poster,\n                  status: status,\n                  proposalsCounter: proposalsCounter,\n                  rejectedProposalsCounter: rejectedProposalsCounter\n                });\n              }\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var id, bountyJson, identifier, name, description, reward, poster, status, proposalsCounter, rejectedProposalsCounter;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              id = _this.props.bountyID;\n              _context2.next = 3;\n              return _this.props.appState.contract.fetchBounty(id);\n\n            case 3:\n              bountyJson = _context2.sent;\n              identifier = id;\n              name = bountyJson[\"name\"];\n              description = bountyJson[\"description\"];\n              reward = parseInt(bountyJson[\"reward\"]) / 1000000000000000000;\n              poster = bountyJson[\"poster\"]; // Might not be useful as (could make two components, one for my bounties and one for all bounties)\n\n              status = _this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n              proposalsCounter = parseInt(bountyJson[\"proposalsCounter\"]);\n              rejectedProposalsCounter = parseInt(bountyJson[\"rejectedProposalsCounter\"]);\n\n              _this.setState({\n                identifier: identifier,\n                name: name,\n                description: description,\n                reward: reward,\n                poster: poster,\n                status: status,\n                proposalsCounter: proposalsCounter,\n                rejectedProposalsCounter: rejectedProposalsCounter\n              });\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n    _this.cancelBounty =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _this.props.appState.contract.cancelBounty(_this.state.identifier, {\n                from: _this.props.appState.accounts[0]\n              });\n\n            case 2:\n              _this.setState({\n                status: \"cancelled\"\n              });\n\n              _this.props.onCancelBounty();\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n    _this.withdrawBounty =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _this.props.appState.contract.EmergencyWithdrawBounty(_this.state.identifier, {\n                from: _this.props.appState.accounts[0]\n              });\n\n            case 2:\n              _this.setState({\n                status: \"withdrawn\"\n              });\n\n              _this.props.onWithdrawBounty();\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n    return _this;\n  }\n\n  _createClass(Bounty, [{\n    key: \"statusCodeToString\",\n    value: function statusCodeToString(code) {\n      if (code === 0) return \"open\";else if (code === 1) return \"cancelled\";else if (code === 2) return \"completed\";else if (code === 3) return \"withdrawn\";\n    }\n  }, {\n    key: \"isCorrectOwner\",\n    value: function isCorrectOwner(selectedOwner) {\n      if (selectedOwner === \"me\") {\n        return this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase() ? true : false;\n      }\n\n      if (selectedOwner === \"others\") {\n        return this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase() ? false : true;\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"cancelButtonRendering\",\n    value: function cancelButtonRendering() {\n      if (this.props.contractStatus === \"active\" && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase() && this.state.status === \"open\" && this.state.proposalsCounter === this.state.rejectedProposalsCounter) {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"cancelBountyButton\",\n          id: \"cancelBountyButton\",\n          onClick: this.cancelBounty,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Cancel\"));\n      }\n    }\n  }, {\n    key: \"withdrawButtonRendering\",\n    value: function withdrawButtonRendering() {\n      if (this.props.contractStatus !== \"active\" && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase()) {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"withdrawBountyButton\",\n          id: \"withdrawBountyButton\",\n          onClick: this.withdrawBounty,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Withdraw\"));\n      }\n    }\n  }, {\n    key: \"viewProposalsButtonRendering\",\n    value: function viewProposalsButtonRendering() {\n      var _this2 = this;\n\n      if (this.state.proposalsCounter) {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"viewProposalsBountyButton\",\n          id: \"viewProposalsBountyButton\",\n          onClick: function onClick(bountyID, viewedProposalBountyPoster, viewedProposalsCounter, viewedRejectedProposalsCounter, status) {\n            _this2.props.onViewProposals(_this2.state.identifier, _this2.state.poster, _this2.state.proposalsCounter, _this2.state.rejectedProposalsCounter, _this2.state.status);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \"View Proposals\"));\n      }\n    }\n  }, {\n    key: \"addProposalButtonRendering\",\n    value: function addProposalButtonRendering() {\n      var _this3 = this;\n\n      if (this.props.appState.accounts[0].toUpperCase() !== this.state.poster.toUpperCase() && this.state.status === \"open\") {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"addProposalButton\",\n          id: \"addProposalButton\",\n          onClick: function onClick(bountyID) {\n            _this3.props.onAddProposal(_this3.state.identifier);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"Add Proposal\"));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var reviewablePropoposalsCounter = this.state.proposalsCounter - this.state.rejectedProposalsCounter;\n      if (this.state.status === \"completed\" || this.state.status === \"cancelled\" || this.state.status === \"withdrawn\") reviewablePropoposalsCounter = 0;\n\n      if ((this.props.selectedStatus === \"all\" || this.props.selectedStatus === this.state.status) && this.isCorrectOwner(this.props.selectedOwner)) {\n        return React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, this.state.identifier), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, this.state.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, this.state.description), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, this.state.reward), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, this.state.status), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, this.state.proposalsCounter), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, reviewablePropoposalsCounter), this.addProposalButtonRendering(), this.viewProposalsButtonRendering(), this.cancelButtonRendering(), this.withdrawButtonRendering());\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return Bounty;\n}(Component); // e.preventDefault(),\n\n\nexport default Bounty;","map":{"version":3,"sources":["/home/airoslive/Codes/EthCode/BountyCollectorConsenSys/truffle/client/src/components/Bounty.jsx"],"names":["React","Component","Bounty","state","identifier","name","description","reward","poster","status","proposalsCounter","rejectedProposalsCounter","componentDidUpdate","props","bountyUpdate","id","bountyID","appState","contract","fetchBounty","bountyJson","parseInt","statusCodeToString","setState","componentDidMount","cancelBounty","from","accounts","onCancelBounty","withdrawBounty","EmergencyWithdrawBounty","onWithdrawBounty","code","selectedOwner","toUpperCase","contractStatus","viewedProposalBountyPoster","viewedProposalsCounter","viewedRejectedProposalsCounter","onViewProposals","onAddProposal","reviewablePropoposalsCounter","selectedStatus","isCorrectOwner","addProposalButtonRendering","viewProposalsButtonRendering","cancelButtonRendering","withdrawButtonRendering"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./css/Bounty.css\";\n\nclass Bounty extends Component {\n  state = {\n    identifier: \"\",\n    name: \"\",\n    description: \"\",\n    reward: \"\",\n    poster: \"\",\n    status: \"\",\n    proposalsCounter: \"\",\n    rejectedProposalsCounter: \"\",\n  }\n\n  componentDidUpdate = async () =>   {\n    if (this.props.bountyUpdate) {\n      const id = this.props.bountyID;\n      const bountyJson = await this.props.appState.contract.fetchBounty(id);\n      const identifier = id;\n      const name = bountyJson[\"name\"];\n      const description = bountyJson[\"description\"];\n      const reward  = parseInt(bountyJson[\"reward\"])/1000000000000000000;\n      const poster = bountyJson[\"poster\"];\n      const status = this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n      const proposalsCounter = parseInt(bountyJson[\"proposalsCounter\"]);\n      const rejectedProposalsCounter = parseInt(bountyJson[\"rejectedProposalsCounter\"]);\n      if (this.state.proposalsCounter !== proposalsCounter || this.state.rejectedProposalsCounter !== rejectedProposalsCounter || this.state.status !== status) {\n        this.setState({ identifier, name, description, reward, poster, status, proposalsCounter, rejectedProposalsCounter});\n      }\n    }\n  }\n\n  componentDidMount = async () => {\n    const id = this.props.bountyID;\n    const bountyJson = await this.props.appState.contract.fetchBounty(id);\n    const identifier = id;\n    const name = bountyJson[\"name\"];\n    const description = bountyJson[\"description\"];\n    const reward  = parseInt(bountyJson[\"reward\"])/1000000000000000000;\n    const poster = bountyJson[\"poster\"]; // Might not be useful as (could make two components, one for my bounties and one for all bounties)\n    const status = this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n    const proposalsCounter = parseInt(bountyJson[\"proposalsCounter\"]);\n    const rejectedProposalsCounter = parseInt(bountyJson[\"rejectedProposalsCounter\"]);\n    this.setState({ identifier, name, description, reward, poster, status, proposalsCounter, rejectedProposalsCounter});\n  }\n\n  statusCodeToString(code) {\n    if (code === 0) return \"open\";\n    else if (code === 1) return \"cancelled\";\n    else if (code === 2) return \"completed\"\n    else if (code === 3) return \"withdrawn\"\n  }\n\n  cancelBounty = async() => {\n    await this.props.appState.contract.cancelBounty(this.state.identifier, {from: this.props.appState.accounts[0]});\n    this.setState({status: \"cancelled\"});\n    this.props.onCancelBounty();\n  }\n\n  withdrawBounty = async() => {\n    await this.props.appState.contract.EmergencyWithdrawBounty(this.state.identifier, {from: this.props.appState.accounts[0]});\n    this.setState({status: \"withdrawn\"});\n    this.props.onWithdrawBounty();\n  }\n\n  isCorrectOwner(selectedOwner) {\n    if (selectedOwner === \"me\") {\n      return (this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase()) ? true : false;\n    }\n    if (selectedOwner === \"others\") {\n      return (this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase()) ? false : true;\n    } else {\n      return true;\n\n    }\n  }\n\n  cancelButtonRendering() {\n    if (this.props.contractStatus === \"active\" && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase() &&\n      this.state.status === \"open\" && this.state.proposalsCounter === this.state.rejectedProposalsCounter) {\n      return <td><button className=\"cancelBountyButton\" id=\"cancelBountyButton\" onClick={this.cancelBounty}>Cancel</button></td>\n    }\n  }\n\n  withdrawButtonRendering() {\n    if (this.props.contractStatus !== \"active\" && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase()) {\n      return <td><button className=\"withdrawBountyButton\" id=\"withdrawBountyButton\" onClick={this.withdrawBounty}>Withdraw</button></td>\n    }\n  }\n\n  viewProposalsButtonRendering() {\n    if (this.state.proposalsCounter) {\n      return <td><button className=\"viewProposalsBountyButton\" id=\"viewProposalsBountyButton\" onClick={(bountyID, viewedProposalBountyPoster, viewedProposalsCounter, viewedRejectedProposalsCounter, status) => {this.props.onViewProposals(this.state.identifier, this.state.poster, this.state.proposalsCounter, this.state.rejectedProposalsCounter, this.state.status)}}>View Proposals</button></td>\n    }\n  }\n\n  addProposalButtonRendering() {\n    if (this.props.appState.accounts[0].toUpperCase() !== this.state.poster.toUpperCase() && this.state.status === \"open\") {\n      return <td><button className=\"addProposalButton\" id=\"addProposalButton\" onClick={bountyID => {this.props.onAddProposal(this.state.identifier)}}>Add Proposal</button></td>\n    }\n  }\n\n  render() {\n    var reviewablePropoposalsCounter = this.state.proposalsCounter - this.state.rejectedProposalsCounter;\n    if (this.state.status === \"completed\" || this.state.status === \"cancelled\" || this.state.status === \"withdrawn\") reviewablePropoposalsCounter = 0;\n    if ((this.props.selectedStatus === \"all\" || this.props.selectedStatus === this.state.status) && this.isCorrectOwner(this.props.selectedOwner)) {\n      return(\n        <React.Fragment>\n          <td>{this.state.identifier}</td>\n          <td>{this.state.name}</td>\n          <td>{this.state.description}</td>\n          <td>{this.state.reward}</td>\n          <td>{this.state.status}</td>\n          <td>{this.state.proposalsCounter}</td>\n          <td>{reviewablePropoposalsCounter}</td>\n          {this.addProposalButtonRendering()}\n          {this.viewProposalsButtonRendering()}\n          {this.cancelButtonRendering()}\n          {this.withdrawButtonRendering()}\n        </React.Fragment>\n        )\n    } else {\n      return (null);\n    }\n  }\n}\n\n// e.preventDefault(),\nexport default Bounty;\n"]},"metadata":{},"sourceType":"module"}