{"ast":null,"code":"import _regeneratorRuntime from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/airoslive/Codes/EthCode/BountyCollector/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/airoslive/Codes/EthCode/BountyCollector/client/src/components/Proposal.jsx\";\nimport React, { Component } from \"react\";\n\nvar Proposal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Proposal, _Component);\n\n  function Proposal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Proposal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Proposal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      identifier: \"\",\n      description: \"\",\n      poster: \"\",\n      review: \"\",\n      status: \"\"\n    };\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var proposalID, bountyID, bountyJson, identifier, description, poster, review, status;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              proposalID = _this.props.proposalID;\n              bountyID = _this.props.bountyID;\n              _context.next = 4;\n              return _this.props.appState.contract.fetchProposal(bountyID, proposalID);\n\n            case 4:\n              bountyJson = _context.sent;\n              identifier = proposalID;\n              description = bountyJson[\"description\"];\n              poster = bountyJson[\"poster\"];\n              review = bountyJson[\"review\"];\n              if (review === \"\") review = \"None\";\n              status = _this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n\n              _this.setState({\n                identifier: identifier,\n                description: description,\n                poster: poster,\n                review: review,\n                status: status\n              });\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n    _this.componentDidUpdate =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var proposalID, bountyID, bountyJson, identifier, description, poster, review, status;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!_this.props.proposalUpdate) {\n                _context2.next = 13;\n                break;\n              }\n\n              proposalID = _this.props.proposalID;\n              bountyID = _this.props.bountyID;\n              _context2.next = 5;\n              return _this.props.appState.contract.fetchProposal(bountyID, proposalID);\n\n            case 5:\n              bountyJson = _context2.sent;\n              identifier = proposalID;\n              description = bountyJson[\"description\"];\n              poster = bountyJson[\"poster\"];\n              review = bountyJson[\"review\"];\n              if (review === \"\") review = \"None\";\n              status = _this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n\n              if (_this.state.status !== status) {\n                _this.setState({\n                  identifier: identifier,\n                  description: description,\n                  poster: poster,\n                  review: review,\n                  status: status\n                });\n              }\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n    return _this;\n  }\n\n  _createClass(Proposal, [{\n    key: \"statusCodeToString\",\n    value: function statusCodeToString(code) {\n      if (code === 0) return \"Reviewable\";else if (code === 1) return \"Declined\";else if (code === 2) return \"Accepted\";\n    }\n  }, {\n    key: \"disputeButtonConditionalRendering\",\n    value: function disputeButtonConditionalRendering() {\n      var _this2 = this;\n\n      console.log(\"hello\");\n      console.log(this.props.latestProposal);\n\n      if (this.props.latestProposal === this.state.identifier + 1 && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase() && this.state.status === \"Declined\" && this.props.open === true) {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"disputeProposalButton\",\n          id: \"disputeProposalButton\",\n          onClick: function onClick(bountyID, proposalID) {\n            _this2.props.onAddDispute(_this2.props.bountyID, _this2.props.proposalID);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, \"Dispute\"));\n      }\n    }\n  }, {\n    key: \"reviewButtonConditionalRendering\",\n    value: function reviewButtonConditionalRendering() {\n      var _this3 = this;\n\n      if (this.props.latestProposal === this.state.identifier && this.props.appState.accounts[0].toUpperCase() === this.props.bountyPoster.toUpperCase() && this.state.status === \"Reviewable\" && this.props.open === true) {\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"reviewProposalButton\",\n          id: \"reviewProposalButton\",\n          onClick: function onClick(bountyID, proposalID) {\n            _this3.props.onReviewProposal(_this3.props.bountyID, _this3.props.proposalID);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"Review\"));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(\"render Proposal\");\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.state.identifier), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, this.state.description), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.state.review), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, this.state.status), this.reviewButtonConditionalRendering(), this.disputeButtonConditionalRendering());\n    }\n  }]);\n\n  return Proposal;\n}(Component);\n\nexport default Proposal;","map":{"version":3,"sources":["/home/airoslive/Codes/EthCode/BountyCollector/client/src/components/Proposal.jsx"],"names":["React","Component","Proposal","state","identifier","description","poster","review","status","componentDidMount","proposalID","props","bountyID","appState","contract","fetchProposal","bountyJson","statusCodeToString","parseInt","setState","componentDidUpdate","proposalUpdate","code","console","log","latestProposal","accounts","toUpperCase","open","onAddDispute","bountyPoster","onReviewProposal","reviewButtonConditionalRendering","disputeButtonConditionalRendering"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nclass Proposal extends Component {\n  state = {\n    identifier: \"\",\n    description: \"\",\n    poster: \"\",\n    review: \"\",\n    status: \"\"\n  }\n\n  componentDidMount = async () => {\n    const proposalID = this.props.proposalID;\n    const bountyID = this.props.bountyID;\n    const bountyJson = await this.props.appState.contract.fetchProposal(bountyID, proposalID);\n    const identifier = proposalID;\n    const description = bountyJson[\"description\"];\n    const poster = bountyJson[\"poster\"];\n    var review = bountyJson[\"review\"];\n    if (review === \"\") review = \"None\";\n    const status = this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n    this.setState({ identifier, description, poster, review, status});\n  }\n\n  componentDidUpdate = async () => {\n    if (this.props.proposalUpdate) {\n      const proposalID = this.props.proposalID;\n      const bountyID = this.props.bountyID;\n      const bountyJson = await this.props.appState.contract.fetchProposal(bountyID, proposalID);\n      const identifier = proposalID;\n      const description = bountyJson[\"description\"];\n      const poster = bountyJson[\"poster\"];\n      var review = bountyJson[\"review\"];\n      if (review === \"\") review = \"None\";\n      const status = this.statusCodeToString(parseInt(bountyJson[\"status\"]));\n      if (this.state.status !== status) {\n        this.setState({ identifier, description, poster, review, status});\n      }\n    }\n  }\n\n  statusCodeToString(code) {\n    if (code === 0) return \"Reviewable\";\n    else if (code === 1) return \"Declined\";\n    else if (code === 2) return \"Accepted\"\n  }\n\n  disputeButtonConditionalRendering() {\n    console.log(\"hello\")\n    console.log(this.props.latestProposal)\n    if (this.props.latestProposal === this.state.identifier + 1 && this.props.appState.accounts[0].toUpperCase() === this.state.poster.toUpperCase()\n      && this.state.status === \"Declined\" && this.props.open === true) {\n      return <td><button className=\"disputeProposalButton\" id=\"disputeProposalButton\" onClick={(bountyID, proposalID) => {this.props.onAddDispute(this.props.bountyID, this.props.proposalID)}}>Dispute</button></td>\n    }\n  }\n\n  reviewButtonConditionalRendering() {\n    if (this.props.latestProposal === this.state.identifier && this.props.appState.accounts[0].toUpperCase() === this.props.bountyPoster.toUpperCase()\n      && this.state.status === \"Reviewable\" && this.props.open === true) {\n      return <td><button className=\"reviewProposalButton\" id=\"reviewProposalButton\" onClick={(bountyID, proposalID) => {this.props.onReviewProposal(this.props.bountyID, this.props.proposalID)}}>Review</button></td>\n    }\n  }\n\n  render() {\n    console.log(\"render Proposal\")\n    return(\n      <React.Fragment>\n        <td>{this.state.identifier}</td>\n        <td>{this.state.description}</td>\n        <td>{this.state.review}</td>\n        <td>{this.state.status}</td>\n        {this.reviewButtonConditionalRendering()}\n        {this.disputeButtonConditionalRendering()}\n      </React.Fragment>\n      )\n  }\n}\nexport default Proposal;\n"]},"metadata":{},"sourceType":"module"}